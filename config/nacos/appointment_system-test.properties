# ============================================
# Nacos 配置示例 - 测试环境 (test)
# ============================================
# 导入方式：在 Nacos 控制台 -> 配置管理 -> 导入配置
# 选择此文件即可导入

# Application
spring.application.name=appointment_system

# Server
server.port=8080

# MySQL Database Configuration
spring.datasource.url=jdbc:mysql://mysql-test:3306/appointment_system?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&characterEncoding=UTF-8
spring.datasource.username=test_user
spring.datasource.password=test_password

# HikariCP Connection Pool
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=25000

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Redis Configuration
spring.data.redis.host=redis-test
spring.data.redis.port=6379
spring.data.redis.password=redis_password
spring.data.redis.database=0

# Session Configuration (Redis)
spring.session.store-type=redis
spring.session.redis.namespace=appointment:session
spring.session.timeout=2h

# RabbitMQ Configuration
spring.rabbitmq.host=rabbitmq-test
spring.rabbitmq.port=5672
spring.rabbitmq.username=test
spring.rabbitmq.password=test

# Nacos Configuration
spring.cloud.nacos.config.enabled=true
spring.cloud.nacos.discovery.enabled=true
spring.cloud.nacos.config.server-addr=nacos-test:8848
spring.cloud.nacos.discovery.server-addr=nacos-test:8848
spring.cloud.nacos.config.namespace=test
spring.cloud.nacos.discovery.namespace=test

# Logging
logging.level.org.example.appointment_system=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN

# Rate Limiting (测试环境开启)
app.rate-limit.enabled=true
app.rate-limit.default-per-minute=60
app.rate-limit.authenticated-per-minute=120
app.rate-limit.auth-endpoint-per-minute=10

# Request Logging
app.logging.request-logging.enabled=true
app.logging.request-logging.include-payload=false
