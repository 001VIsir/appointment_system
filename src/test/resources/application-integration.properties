# Integration Test Configuration (uses H2 in-memory database)
# This profile is for full integration tests with H2 and embedded Redis

# H2 Database Configuration
spring.datasource.url=jdbc:h2:mem:integration_test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=MySQL
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA/Hibernate Settings
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# Initialize database with schema.sql
spring.sql.init.mode=always

# Disable Flyway in integration tests (use schema.sql)
spring.flyway.enabled=false

# Redis Configuration (embedded for tests)
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.database=1

# Redis Session
spring.session.store-type=redis
spring.session.redis.namespace=appointment:test:session
spring.session.timeout=30m

# Disable rate limiting in tests
app.rate-limit.enabled=false

# Request Logging
app.logging.request-logging.enabled=false

# Signed Link Configuration
app.signed-link.secret=test-secret-key-for-integration-tests-at-least-32-chars
app.signed-link.expiration-hours=24

# Logging
logging.level.org.example.appointment_system=DEBUG
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=DEBUG
